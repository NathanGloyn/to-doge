function Doge(a){function b(){if(!g.length)return"wow";var a=Math.floor(Math.random()*g.length);return g[a]}function c(){var c=a(".text");c.length>50&&c[0].remove();var g=a("<div />").addClass("text");g.addClass(f[Math.floor(Math.random()*f.length)]),g.addClass(e[Math.floor(Math.random()*f.length)]),g.html(b());var h=550*Math.random()+d.left;h<d.left&&(h+=d.left);var i=600*Math.random()+d.top;g.css("left",h+"px"),g.css("top",i+"px"),g.hide(),a("#doge").append(g),g.fadeIn(600)}var d,e=["red","green","blue","yellow","magenta","cyan"],f=["small","medium","big"],g=["wow","much cool","lol"],h=0;this.display=function(){a("#doge").toggle(),d=a("#doge").position(),h=a("#doge").width();for(var b=0;50>b;b++)c()}}function List(a){function b(a,b){for(var c=0;c<b.length;c++)if(b[c].text==a)return b[c];return null}var c=[],d=[];this.storage=a,this.toDo=c,this.done=d,this.add=function(b){var d=new ListItemModel(b);return c.push(d),a.store(d.text,JSON.stringify(d)),d},this.markDone=function(e){var f=new Date,g=b(e,c);return d.push(g),g.done=!0,g.dateDone=f,a.store(g.text,JSON.stringify(g)),g},this.loadItems=function(){for(var b=0;b<a.count;b++){var e=JSON.parse(a.load(b),reviver);e.done?d.push(e):c.push(e)}}}function ListItemModel(a){var b=new Date;this.text=a,this.done=!1,this.dateCreated=b,this.dateDone=null}function reviver(a,b){var c;return"string"==typeof b&&(c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z)$/.exec(b))?new Date(Date.UTC(+c[1],+c[2]-1,+c[3],+c[4],+c[5],+c[6])):b}function Storage(){this.count=localStorage.length,this.store=function(a,b){localStorage.setItem(a,b)},this.key=function(a){return a>localStorage.length-1?null:localStorage.key(a)},this.load=function(a){return localStorage.getItem("number"==typeof a?localStorage.key(a):a)}}!function(a,b){function c(){s.loadItems();for(var a=0;a<s.toDo.length;a++)j(s.toDo[a],u),r++;for(var a=0;a<s.done.length;a++)j(s.done[a],b("#doneList"))}function d(){console.log("Add handlers"),b("body").keypress(k),v.click(g),x.keyup(h),b("#btnAddNewItem").click(i),b("#doge").click(q)}function e(a){var b=a?"visible":"hidden";w.css("visibility",b)}function f(a){var c=b(a.target);if(c.is(":checked")){a.stopPropagation();var d=c.attr("id"),e=b("label[for='"+d+"']").text(),f=s.markDone(e);t.display(),setTimeout(function(){o(f)},2e3)}}function g(){console.log("New item clicked"),e(!0),v.hide(),x.focus()}function h(a){13==a.keyCode&&(i(),a.stopPropagation())}function i(){var a=x.val();if(a){var b=s.add(a);j(b,u),console.log("Create new toDoList item"),r++,l()}}function j(a,b){var c=a.done?n(a):m(a);b.append(c)}function k(a){27===a.keyCode&&(l(),a.preventDefault(),a.stopPropagation())}function l(){console.log("Hide new item entry"),x.val(""),e(!1),v.show(),v.focus()}function m(c){var d=b(a.createElement("li")).append(b(a.createElement("input")).attr({id:"item-"+r,type:"checkbox"}).click(f)).append(b(a.createElement("label")).attr({"for":"item-"+r}).text(c.text));return d}function n(c){var d=b(a.createElement("li")).append(b(a.createElement("span")).text(c.text)).append(b(a.createElement("span")).text(c.dateDone.toLocaleString()).addClass("doneDate"));return d}function o(a){var c=b("label:contains('"+a.text+"')").parent();c.remove();var d=n(a);b("#doneList").append(d)}function p(){b(".tabs .tab-links a").on("click",function(a){var c=b(this).attr("href");b(".tabs "+c).show().siblings().hide(),b(this).parent("li").addClass("active").siblings().removeClass("active"),a.preventDefault()})}function q(){b("#doge div").remove(),b("#doge").toggle()}var r=0,s=new List(new Storage),t=new Doge(b),u=b("#toDoList"),v=b("#btnNewItem"),w=b("#newItemDiv"),x=b("#txtNewItem");b(a).ready(function(){b("#doge").toggle(),p(),d(),c(),console.log(r)})}(window.document,window.jQuery);